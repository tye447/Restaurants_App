!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{X3zk:function(t,r,s){"use strict";s.r(r),s.d(r,"LoginPageModule",function(){return M});var o,i,a,u,c,l=s("ofXK"),b=s("3Pt+"),f=s("TEn/"),d=s("tyNb"),g=s("fXoL"),h=s("tk/3"),p=((o=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getAllUsers",value:function(e){return this.http.get(e).pipe()}}]),t}()).\u0275fac=function(e){return new(e||o)(g.Pb(h.a))},o.\u0275prov=g.Fb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),m=s("RD+2"),w=((i=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getAllOrders",value:function(e){return this.http.get(e).pipe()}}]),t}()).\u0275fac=function(e){return new(e||i)(g.Pb(h.a))},i.\u0275prov=g.Fb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),v=[{path:"",component:(a=function(){function t(n,r,s,o,i,a){e(this,t),this.route=n,this.fb=r,this.router=s,this.userService=o,this.restaurantsService=i,this.ordersService=a,this.urlUsers="./assets/users.json",this.urlRestaurants="./assets/restaurants.json",this.urlOrders="./assets/orders.json"}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){sessionStorage.clear(),this.name="",this.password=""}},{key:"logForm",value:function(){this.buildLoginForm(),this.setCurrentUser(this.urlUsers,this.loginForm.value.name,this.loginForm.value.password)}},{key:"buildLoginForm",value:function(){this.loginForm=this.fb.group({name:[this.name],password:[this.password]})}},{key:"setCurrentUser",value:function(e,t,n){var r=this;this.userService.getAllUsers(e).subscribe(function(e){var s=e.filter(function(e){return e.name===t}).filter(function(e){return e.password===n})[0];null!=s?(window.sessionStorage.setItem("currentUser",JSON.stringify(s)),r.router.navigateByUrl("tabs/restaurants").then(function(){r.setRestaurants(),r.setOrdersByUser()})):(alert("Invalid name or password: Please try again"),window.sessionStorage.clear())})}},{key:"setRestaurants",value:function(){this.restaurantsService.getAllRestaurantJSON(this.urlRestaurants).subscribe(function(e){window.sessionStorage.setItem("allRestaurants",JSON.stringify(e))})}},{key:"setOrdersByUser",value:function(){this.ordersService.getAllOrders(this.urlOrders).subscribe(function(e){var t=JSON.parse(window.sessionStorage.getItem("currentUser")),n=t.id,r=e.filter(function(e){return e.userId===parseInt(n,10)});t.ordersCount=r.length,window.sessionStorage.setItem("currentUser",JSON.stringify(t)),window.sessionStorage.setItem("ordersCurrentUser",JSON.stringify(r))})}}]),t}(),a.\u0275fac=function(e){return new(e||a)(g.Jb(d.a),g.Jb(b.a),g.Jb(d.g),g.Jb(p),g.Jb(m.a),g.Jb(w))},a.\u0275cmp=g.Db({type:a,selectors:[["app-login"]],decls:18,vars:2,consts:[[3,"ngSubmit"],["autocomplete","","type","text","name","name",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],["type","submit"]],template:function(e,t){1&e&&(g.Mb(0,"ion-header"),g.Mb(1,"ion-toolbar"),g.Mb(2,"ion-title"),g.jc(3,"login"),g.Lb(),g.Lb(),g.Lb(),g.Mb(4,"ion-content"),g.Mb(5,"form",0),g.Tb("ngSubmit",function(){return t.logForm()}),g.Mb(6,"ion-item"),g.Mb(7,"ion-label"),g.jc(8,"Name"),g.Lb(),g.Mb(9,"ion-input",1),g.Tb("ngModelChange",function(e){return t.name=e}),g.Lb(),g.Lb(),g.Mb(10,"ion-item"),g.Mb(11,"ion-label"),g.jc(12,"Password"),g.Lb(),g.Mb(13,"ion-input",2),g.Tb("ngModelChange",function(e){return t.password=e}),g.Lb(),g.Lb(),g.Mb(14,"ion-button",3),g.jc(15,"Login"),g.Lb(),g.Lb(),g.Mb(16,"ion-text"),g.jc(17,"name:Arthur, password: arthur"),g.Lb(),g.Lb()),2&e&&(g.zb(9),g.ac("ngModel",t.name),g.zb(4),g.ac("ngModel",t.password))},directives:[f.o,f.D,f.C,f.m,b.j,b.f,b.g,f.s,f.t,f.r,f.I,b.e,b.h,f.e,f.A],styles:[""]}),a)}],y=((c=function t(){e(this,t)}).\u0275fac=function(e){return new(e||c)},c.\u0275mod=g.Hb({type:c}),c.\u0275inj=g.Gb({imports:[[d.i.forChild(v)],d.i]}),c),M=((u=function t(){e(this,t)}).\u0275fac=function(e){return new(e||u)},u.\u0275mod=g.Hb({type:u}),u.\u0275inj=g.Gb({imports:[[l.b,b.b,f.E,y]]}),u)}}])}();