(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{X3zk:function(t,e,s){"use strict";s.r(e),s.d(e,"LoginPageModule",function(){return h});var r=s("ofXK"),n=s("3Pt+"),o=s("TEn/"),i=s("tyNb"),a=s("fXoL"),u=s("tk/3");let l=(()=>{class t{constructor(t){this.http=t}getAllUsers(t){return this.http.get(t).pipe()}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(u.a))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var b=s("RD+2");let c=(()=>{class t{constructor(t){this.http=t}getAllOrders(t){return this.http.get(t).pipe()}}return t.\u0275fac=function(e){return new(e||t)(a.Pb(u.a))},t.\u0275prov=a.Fb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const d=[{path:"",component:(()=>{class t{constructor(t,e,s,r,n,o){this.route=t,this.fb=e,this.router=s,this.userService=r,this.restaurantsService=n,this.ordersService=o,this.urlUsers="./assets/users.json",this.urlRestaurants="./assets/restaurants.json",this.urlOrders="./assets/orders.json"}ngOnInit(){}ionViewWillEnter(){sessionStorage.clear(),this.name="",this.password=""}logForm(){this.buildLoginForm(),this.setCurrentUser(this.urlUsers,this.loginForm.value.name,this.loginForm.value.password)}buildLoginForm(){this.loginForm=this.fb.group({name:[this.name],password:[this.password]})}setCurrentUser(t,e,s){this.userService.getAllUsers(t).subscribe(t=>{const r=t.filter(t=>t.name===e).filter(t=>t.password===s)[0];null!=r?(window.sessionStorage.setItem("currentUser",JSON.stringify(r)),this.router.navigateByUrl("tabs/restaurants").then(()=>{this.setRestaurants(),this.setOrdersByUser()})):(alert("Invalid name or password: Please try again"),window.sessionStorage.clear())})}setRestaurants(){this.restaurantsService.getAllRestaurantJSON(this.urlRestaurants).subscribe(t=>{window.sessionStorage.setItem("allRestaurants",JSON.stringify(t))})}setOrdersByUser(){this.ordersService.getAllOrders(this.urlOrders).subscribe(t=>{const e=JSON.parse(window.sessionStorage.getItem("currentUser")),s=e.id,r=t.filter(t=>t.userId===parseInt(s,10));e.ordersCount=r.length,window.sessionStorage.setItem("currentUser",JSON.stringify(e)),window.sessionStorage.setItem("ordersCurrentUser",JSON.stringify(r))})}}return t.\u0275fac=function(e){return new(e||t)(a.Jb(i.a),a.Jb(n.a),a.Jb(i.g),a.Jb(l),a.Jb(b.a),a.Jb(c))},t.\u0275cmp=a.Db({type:t,selectors:[["app-login"]],decls:18,vars:2,consts:[[3,"ngSubmit"],["autocomplete","","type","text","name","name",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],["type","submit"]],template:function(t,e){1&t&&(a.Mb(0,"ion-header"),a.Mb(1,"ion-toolbar"),a.Mb(2,"ion-title"),a.jc(3,"login"),a.Lb(),a.Lb(),a.Lb(),a.Mb(4,"ion-content"),a.Mb(5,"form",0),a.Tb("ngSubmit",function(){return e.logForm()}),a.Mb(6,"ion-item"),a.Mb(7,"ion-label"),a.jc(8,"Name"),a.Lb(),a.Mb(9,"ion-input",1),a.Tb("ngModelChange",function(t){return e.name=t}),a.Lb(),a.Lb(),a.Mb(10,"ion-item"),a.Mb(11,"ion-label"),a.jc(12,"Password"),a.Lb(),a.Mb(13,"ion-input",2),a.Tb("ngModelChange",function(t){return e.password=t}),a.Lb(),a.Lb(),a.Mb(14,"ion-button",3),a.jc(15,"Login"),a.Lb(),a.Lb(),a.Mb(16,"ion-text"),a.jc(17,"name:Arthur, password: arthur"),a.Lb(),a.Lb()),2&t&&(a.zb(9),a.ac("ngModel",e.name),a.zb(4),a.ac("ngModel",e.password))},directives:[o.o,o.D,o.C,o.m,n.j,n.f,n.g,o.s,o.t,o.r,o.I,n.e,n.h,o.e,o.A],styles:[""]}),t})()}];let g=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[i.i.forChild(d)],i.i]}),t})(),h=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=a.Hb({type:t}),t.\u0275inj=a.Gb({imports:[[r.b,n.b,o.E,g]]}),t})()}}]);