(self.webpackChunkionic_restaurants_app=self.webpackChunkionic_restaurants_app||[]).push([[1507],{6748:function(r,e,n){"use strict";n.r(e),n.d(e,{OrdersPageModule:function(){return f}});var t=n(1116),o=n(1462),i=n(8809),s=n(5860),a=n(8619);function c(r,e){if(1&r&&(a.TgZ(0,"ion-label"),a._uU(1),a.qZA()),2&r){const r=a.oxw().$implicit;a.xp6(1),a.hij(" + ",(null==r?null:r.recipesCount)-1,"")}}const u=function(){return["order-info"]},l=function(r){return{id:r}};function d(r,e){if(1&r&&(a.TgZ(0,"ion-card",2),a.TgZ(1,"ion-card-content"),a.TgZ(2,"ion-list",3),a.TgZ(3,"ion-item"),a.TgZ(4,"ion-thumbnail",4),a._UZ(5,"ion-img",5),a.qZA(),a._uU(6),a._UZ(7,"br"),a._uU(8),a.qZA(),a.TgZ(9,"ion-grid"),a.TgZ(10,"ion-row"),a.TgZ(11,"ion-col",6),a.TgZ(12,"ion-label"),a._uU(13),a.qZA(),a.YNc(14,c,2,1,"ion-label",0),a.qZA(),a.TgZ(15,"ion-col",7),a.TgZ(16,"ion-label"),a._uU(17),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA(),a.qZA()),2&r){const r=e.$implicit;a.Q6J("routerLink",a.DdM(8,u))("queryParams",a.VKq(9,l,r.orderId)),a.xp6(5),a.Q6J("src",null==r?null:r.restaurantIcon),a.xp6(1),a.hij(" ",null==r?null:r.restaurantName,""),a.xp6(2),a.hij("",null==r?null:r.orderDate," "),a.xp6(5),a.Oqu(null==r?null:r.recipes[0].name),a.xp6(1),a.Q6J("ngIf",(null==r?null:r.recipesCount)>1),a.xp6(3),a.hij("",null==r?null:r.orderPriceTotal," \u20ac")}}function p(r,e){if(1&r&&(a.TgZ(0,"ion-content"),a.YNc(1,d,18,11,"ion-card",1),a.qZA()),2&r){const r=a.oxw();a.xp6(1),a.Q6J("ngForOf",r.orders)}}const g=[{path:"",component:(()=>{class r{constructor(){}ngOnInit(){}ionViewWillEnter(){this.loadOrdersCurrentUser()}loadOrdersCurrentUser(){this.orders=[];let r={orderId:0,restaurantName:"",recipes:[],recipesCount:0,orderPriceTotal:0,orderDate:"",restaurantIcon:""};const e=JSON.parse(window.sessionStorage.getItem("ordersCurrentUser")),n=JSON.parse(window.sessionStorage.getItem("allRestaurants"));null!==e?(e.forEach(e=>{r={orderId:0,restaurantName:"",recipes:[],recipesCount:0,orderPriceTotal:0,orderDate:"",restaurantIcon:""},r.orderId=e.id;const t=n.filter(r=>r.id===parseInt(e.restaurantId,10))[0];r.restaurantName=t.name,r.restaurantIcon=t.img;const o=t.recipes;o.filter(r=>r.id===parseInt(e.recipeId[0],10)),r.recipes=this.setRecipes(e,o,r),r.recipesCount=e.recipeId.length,r.orderDate=e.date,this.orders.push(r)}),window.sessionStorage.setItem("ordersCurrentUserTrans",JSON.stringify(this.orders))):this.orders=null}setRecipes(r,e,n){const t=[];return r.recipeId.forEach(r=>{const o=e.filter(e=>e.id===parseInt(r,10))[0];n.orderPriceTotal+=o.price,t.push(o)}),t}}return r.\u0275fac=function(e){return new(e||r)},r.\u0275cmp=a.Xpm({type:r,selectors:[["app-orders"]],decls:6,vars:1,consts:[[4,"ngIf"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[3,"routerLink","queryParams"],["lines","none"],["slot","start"],[3,"src"],["size","10"],["size","2"]],template:function(r,e){1&r&&(a.TgZ(0,"body"),a.TgZ(1,"ion-header"),a.TgZ(2,"ion-toolbar"),a.TgZ(3,"ion-title"),a._uU(4,"Orders"),a.qZA(),a.qZA(),a.qZA(),a.YNc(5,p,2,1,"ion-content",0),a.qZA()),2&r&&(a.xp6(5),a.Q6J("ngIf",null!==e.orders))},directives:[i.Gu,i.sr,i.wd,t.O5,i.W2,t.sg,i.PM,i.YI,s.rH,i.FN,i.q_,i.Ie,i.Bs,i.Xz,i.jY,i.Nd,i.wI,i.Q$],styles:[""]}),r})()},{path:"order-info",loadChildren:()=>n.e(9143).then(n.bind(n,9143)).then(r=>r.OrderInfoPageModule)}];let Z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[s.Bz.forChild(g)],s.Bz]}),r})(),f=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=a.oAB({type:r}),r.\u0275inj=a.cJS({imports:[[t.ez,o.u5,i.Pc,Z]]}),r})()}}]);