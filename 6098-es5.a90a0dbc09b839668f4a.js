!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function n(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}(self.webpackChunkionic_restaurants_app=self.webpackChunkionic_restaurants_app||[]).push([[6098],{6098:function(t,r,s){"use strict";s.r(r),s.d(r,{LoginPageModule:function(){return v}});var i,o,u=s(8583),a=s(665),c=s(7823),l=s(649),f=s(639),g=s(1841),d=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getAllUsers",value:function(e){return this.http.get(e).pipe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.LFG(g.eN))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),p=s(1684),h=function(){var t=function(){function t(n){e(this,t),this.http=n}return n(t,[{key:"getAllOrders",value:function(e){return this.http.get(e).pipe()}}]),t}();return t.\u0275fac=function(e){return new(e||t)(f.LFG(g.eN))},t.\u0275prov=f.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t}(),m=[{path:"",component:(i=function(){function t(n,r,s,i,o,u){e(this,t),this.route=n,this.fb=r,this.router=s,this.userService=i,this.restaurantsService=o,this.ordersService=u,this.urlUsers="./assets/users.json",this.urlRestaurants="./assets/restaurants.json",this.urlOrders="./assets/orders.json"}return n(t,[{key:"ngOnInit",value:function(){}},{key:"ionViewWillEnter",value:function(){sessionStorage.clear(),this.name="",this.password=""}},{key:"logForm",value:function(){this.buildLoginForm(),this.setCurrentUser(this.urlUsers,this.loginForm.value.name,this.loginForm.value.password)}},{key:"buildLoginForm",value:function(){this.loginForm=this.fb.group({name:[this.name],password:[this.password]})}},{key:"setCurrentUser",value:function(e,t,n){var r=this;this.userService.getAllUsers(e).subscribe(function(e){var s=e.filter(function(e){return e.name===t}).filter(function(e){return e.password===n})[0];null!=s?(window.sessionStorage.setItem("currentUser",JSON.stringify(s)),r.router.navigateByUrl("tabs/restaurants").then(function(){r.setRestaurants(),r.setOrdersByUser()})):(alert("Invalid name or password: Please try again"),window.sessionStorage.clear())})}},{key:"setRestaurants",value:function(){this.restaurantsService.getAllRestaurantJSON(this.urlRestaurants).subscribe(function(e){window.sessionStorage.setItem("allRestaurants",JSON.stringify(e))})}},{key:"setOrdersByUser",value:function(){this.ordersService.getAllOrders(this.urlOrders).subscribe(function(e){var t=JSON.parse(window.sessionStorage.getItem("currentUser")),n=t.id,r=e.filter(function(e){return e.userId===parseInt(n,10)});t.ordersCount=r.length,window.sessionStorage.setItem("currentUser",JSON.stringify(t)),window.sessionStorage.setItem("ordersCurrentUser",JSON.stringify(r))})}}]),t}(),i.\u0275fac=function(e){return new(e||i)(f.Y36(l.gz),f.Y36(a.qu),f.Y36(l.F0),f.Y36(d),f.Y36(p.P),f.Y36(h))},i.\u0275cmp=f.Xpm({type:i,selectors:[["app-login"]],decls:18,vars:2,consts:[[3,"ngSubmit"],["autocomplete","","type","text","name","name",3,"ngModel","ngModelChange"],["type","password","name","password",3,"ngModel","ngModelChange"],["type","submit"]],template:function(e,t){1&e&&(f.TgZ(0,"ion-header"),f.TgZ(1,"ion-toolbar"),f.TgZ(2,"ion-title"),f._uU(3,"login"),f.qZA(),f.qZA(),f.qZA(),f.TgZ(4,"ion-content"),f.TgZ(5,"form",0),f.NdJ("ngSubmit",function(){return t.logForm()}),f.TgZ(6,"ion-item"),f.TgZ(7,"ion-label"),f._uU(8,"Name"),f.qZA(),f.TgZ(9,"ion-input",1),f.NdJ("ngModelChange",function(e){return t.name=e}),f.qZA(),f.qZA(),f.TgZ(10,"ion-item"),f.TgZ(11,"ion-label"),f._uU(12,"Password"),f.qZA(),f.TgZ(13,"ion-input",2),f.NdJ("ngModelChange",function(e){return t.password=e}),f.qZA(),f.qZA(),f.TgZ(14,"ion-button",3),f._uU(15,"Login"),f.qZA(),f.qZA(),f.TgZ(16,"ion-text"),f._uU(17,"name:Arthur, password: arthur"),f.qZA(),f.qZA()),2&e&&(f.xp6(9),f.Q6J("ngModel",t.name),f.xp6(4),f.Q6J("ngModel",t.password))},directives:[c.Gu,c.sr,c.wd,c.W2,a._Y,a.JL,a.F,c.Ie,c.Q$,c.pK,c.j9,a.JJ,a.On,c.YG,c.yW],styles:[""]}),i)}],w=function(){var t=function t(){e(this,t)};return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=f.oAB({type:t}),t.\u0275inj=f.cJS({imports:[[l.Bz.forChild(m)],l.Bz]}),t}(),v=((o=function t(){e(this,t)}).\u0275fac=function(e){return new(e||o)},o.\u0275mod=f.oAB({type:o}),o.\u0275inj=f.cJS({imports:[[u.ez,a.u5,c.Pc,w]]}),o)}}])}();