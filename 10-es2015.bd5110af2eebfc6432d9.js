(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"f+ep":function(n,l,e){"use strict";e.r(l);var u=e("8Y7J");class t{}var s=e("pMnS"),r=e("MKJQ"),o=e("sZkV"),i=e("s7LF"),a=e("IheW");let b=(()=>{class n{constructor(n){this.http=n}getAllUsers(n){return this.http.get(n).pipe()}}return n.ngInjectableDef=u.Ob({factory:function(){return new n(u.Pb(a.c))},token:n,providedIn:"root"}),n})();var g=e("RD+2");let d=(()=>{class n{constructor(n){this.http=n}getAllOrders(n){return this.http.get(n).pipe()}}return n.ngInjectableDef=u.Ob({factory:function(){return new n(u.Pb(a.c))},token:n,providedIn:"root"}),n})();class p{constructor(n,l,e,u,t,s){this.route=n,this.fb=l,this.router=e,this.userService=u,this.restaurantsService=t,this.ordersService=s,this.urlUsers="./assets/users.json",this.urlRestaurants="./assets/restaurants.json",this.urlOrders="./assets/orders.json"}ngOnInit(){}ionViewWillEnter(){sessionStorage.clear(),this.name="",this.password=""}logForm(){this.buildLoginForm(),this.setCurrentUser(this.urlUsers,this.loginForm.value.name,this.loginForm.value.password)}buildLoginForm(){this.loginForm=this.fb.group({name:[this.name],password:[this.password]})}setCurrentUser(n,l,e){this.userService.getAllUsers(n).subscribe(n=>{const u=n.filter(n=>n.name===l).filter(n=>n.password===e)[0];null!=u?(window.sessionStorage.setItem("currentUser",JSON.stringify(u)),this.router.navigateByUrl("tabs/restaurants").then(()=>{this.setRestaurants(),this.setOrdersByUser()})):(alert("Invalid name or password: Please try again"),window.sessionStorage.clear())})}setRestaurants(){this.restaurantsService.getAllRestaurantJSON(this.urlRestaurants).subscribe(n=>{window.sessionStorage.setItem("allRestaurants",JSON.stringify(n))})}setOrdersByUser(){this.ordersService.getAllOrders(this.urlOrders).subscribe(n=>{const l=JSON.parse(window.sessionStorage.getItem("currentUser")),e=l.id,u=n.filter(n=>n.userId===parseInt(e,10));l.ordersCount=u.length,window.sessionStorage.setItem("currentUser",JSON.stringify(l)),window.sessionStorage.setItem("ordersCurrentUser",JSON.stringify(u))})}}var h=e("iInd"),c=u.nb({encapsulation:0,styles:[[""]],data:{}});function m(n){return u.Kb(0,[(n()(),u.pb(0,0,null,null,6,"ion-header",[],null,null,null,r.N,r.m)),u.ob(1,49152,null,0,o.A,[u.h,u.k,u.x],null,null),(n()(),u.pb(2,0,null,0,4,"ion-toolbar",[],null,null,null,r.bb,r.A)),u.ob(3,49152,null,0,o.yb,[u.h,u.k,u.x],null,null),(n()(),u.pb(4,0,null,0,2,"ion-title",[],null,null,null,r.ab,r.z)),u.ob(5,49152,null,0,o.wb,[u.h,u.k,u.x],null,null),(n()(),u.Ib(-1,0,["login"])),(n()(),u.pb(7,0,null,null,36,"ion-content",[],null,null,null,r.L,r.k)),u.ob(8,49152,null,0,o.t,[u.h,u.k,u.x],null,null),(n()(),u.pb(9,0,null,0,31,"form",[["novalidate",""]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngSubmit"],[null,"submit"],[null,"reset"]],(function(n,l,e){var t=!0,s=n.component;return"submit"===l&&(t=!1!==u.Bb(n,11).onSubmit(e)&&t),"reset"===l&&(t=!1!==u.Bb(n,11).onReset()&&t),"ngSubmit"===l&&(t=!1!==s.logForm()&&t),t}),null,null)),u.ob(10,16384,null,0,i.m,[],null,null),u.ob(11,4210688,null,0,i.h,[[8,null],[8,null]],null,{ngSubmit:"ngSubmit"}),u.Fb(2048,null,i.a,null,[i.h]),u.ob(13,16384,null,0,i.g,[[4,i.a]],null,null),(n()(),u.pb(14,0,null,null,11,"ion-item",[],null,null,null,r.R,r.q)),u.ob(15,49152,null,0,o.G,[u.h,u.k,u.x],null,null),(n()(),u.pb(16,0,null,0,2,"ion-label",[],null,null,null,r.S,r.r)),u.ob(17,49152,null,0,o.M,[u.h,u.k,u.x],null,null),(n()(),u.Ib(-1,0,["Name"])),(n()(),u.pb(19,0,null,0,6,"ion-input",[["autocomplete",""],["name","name"],["type","text"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var t=!0,s=n.component;return"ionBlur"===l&&(t=!1!==u.Bb(n,20)._handleBlurEvent(e.target)&&t),"ionChange"===l&&(t=!1!==u.Bb(n,20)._handleInputEvent(e.target)&&t),"ngModelChange"===l&&(t=!1!==(s.name=e)&&t),t}),r.Q,r.p)),u.ob(20,4341760,null,0,o.Hb,[u.p,u.k],null,null),u.Fb(1024,null,i.d,(function(n){return[n]}),[o.Hb]),u.ob(22,671744,null,0,i.i,[[2,i.a],[8,null],[8,null],[6,i.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,i.e,null,[i.i]),u.ob(24,16384,null,0,i.f,[[4,i.e]],null,null),u.ob(25,49152,null,0,o.F,[u.h,u.k,u.x],{autocomplete:[0,"autocomplete"],name:[1,"name"],type:[2,"type"]},null),(n()(),u.pb(26,0,null,null,11,"ion-item",[],null,null,null,r.R,r.q)),u.ob(27,49152,null,0,o.G,[u.h,u.k,u.x],null,null),(n()(),u.pb(28,0,null,0,2,"ion-label",[],null,null,null,r.S,r.r)),u.ob(29,49152,null,0,o.M,[u.h,u.k,u.x],null,null),(n()(),u.Ib(-1,0,["Password"])),(n()(),u.pb(31,0,null,0,6,"ion-input",[["name","password"],["type","password"]],[[2,"ng-untouched",null],[2,"ng-touched",null],[2,"ng-pristine",null],[2,"ng-dirty",null],[2,"ng-valid",null],[2,"ng-invalid",null],[2,"ng-pending",null]],[[null,"ngModelChange"],[null,"ionBlur"],[null,"ionChange"]],(function(n,l,e){var t=!0,s=n.component;return"ionBlur"===l&&(t=!1!==u.Bb(n,32)._handleBlurEvent(e.target)&&t),"ionChange"===l&&(t=!1!==u.Bb(n,32)._handleInputEvent(e.target)&&t),"ngModelChange"===l&&(t=!1!==(s.password=e)&&t),t}),r.Q,r.p)),u.ob(32,4341760,null,0,o.Hb,[u.p,u.k],null,null),u.Fb(1024,null,i.d,(function(n){return[n]}),[o.Hb]),u.ob(34,671744,null,0,i.i,[[2,i.a],[8,null],[8,null],[6,i.d]],{name:[0,"name"],model:[1,"model"]},{update:"ngModelChange"}),u.Fb(2048,null,i.e,null,[i.i]),u.ob(36,16384,null,0,i.f,[[4,i.e]],null,null),u.ob(37,49152,null,0,o.F,[u.h,u.k,u.x],{name:[0,"name"],type:[1,"type"]},null),(n()(),u.pb(38,0,null,null,2,"ion-button",[["type","submit"]],null,null,null,r.D,r.c)),u.ob(39,49152,null,0,o.j,[u.h,u.k,u.x],{type:[0,"type"]},null),(n()(),u.Ib(-1,0,["Login"])),(n()(),u.pb(41,0,null,0,2,"ion-text",[],null,null,null,r.Y,r.x)),u.ob(42,49152,null,0,o.tb,[u.h,u.k,u.x],null,null),(n()(),u.Ib(-1,0,["name:Arthur, password: arthur"]))],(function(n,l){var e=l.component;n(l,22,0,"name",e.name),n(l,25,0,"","name","text"),n(l,34,0,"password",e.password),n(l,37,0,"password","password"),n(l,39,0,"submit")}),(function(n,l){n(l,9,0,u.Bb(l,13).ngClassUntouched,u.Bb(l,13).ngClassTouched,u.Bb(l,13).ngClassPristine,u.Bb(l,13).ngClassDirty,u.Bb(l,13).ngClassValid,u.Bb(l,13).ngClassInvalid,u.Bb(l,13).ngClassPending),n(l,19,0,u.Bb(l,24).ngClassUntouched,u.Bb(l,24).ngClassTouched,u.Bb(l,24).ngClassPristine,u.Bb(l,24).ngClassDirty,u.Bb(l,24).ngClassValid,u.Bb(l,24).ngClassInvalid,u.Bb(l,24).ngClassPending),n(l,31,0,u.Bb(l,36).ngClassUntouched,u.Bb(l,36).ngClassTouched,u.Bb(l,36).ngClassPristine,u.Bb(l,36).ngClassDirty,u.Bb(l,36).ngClassValid,u.Bb(l,36).ngClassInvalid,u.Bb(l,36).ngClassPending)}))}function v(n){return u.Kb(0,[(n()(),u.pb(0,0,null,null,1,"app-login",[],null,null,null,m,c)),u.ob(1,114688,null,0,p,[h.a,i.b,h.m,b,g.a,d],null,null)],(function(n,l){n(l,1,0)}),null)}var w=u.lb("app-login",p,v,{},{},[]),C=e("SVse");class B{}e.d(l,"LoginPageModuleNgFactory",(function(){return f}));var f=u.mb(t,[],(function(n){return u.yb([u.zb(512,u.j,u.X,[[8,[s.a,w]],[3,u.j],u.v]),u.zb(4608,C.l,C.k,[u.s,[2,C.r]]),u.zb(4608,i.l,i.l,[]),u.zb(4608,o.b,o.b,[u.x,u.g]),u.zb(4608,o.Cb,o.Cb,[o.b,u.j,u.p]),u.zb(4608,o.Fb,o.Fb,[o.b,u.j,u.p]),u.zb(1073742336,C.b,C.b,[]),u.zb(1073742336,i.k,i.k,[]),u.zb(1073742336,i.c,i.c,[]),u.zb(1073742336,o.Ab,o.Ab,[]),u.zb(1073742336,h.o,h.o,[[2,h.t],[2,h.m]]),u.zb(1073742336,B,B,[]),u.zb(1073742336,t,t,[]),u.zb(1024,h.k,(function(){return[[{path:"",component:p}]]}),[])])}))}}]);