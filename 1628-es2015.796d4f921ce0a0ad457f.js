(self.webpackChunkionic_restaurants_app=self.webpackChunkionic_restaurants_app||[]).push([[1628],{1628:function(t,e,n){"use strict";n.r(e),n.d(e,{RestaurantsPageModule:function(){return _}});var r=n(1116),s=n(1462),a=n(8809),i=n(5860),o=n(8619),u=n(9827);const c=function(){return["restaurant-info"]},d=function(t,e){return{name:t,formatted_address:e}};function l(t,e){if(1&t&&(o.TgZ(0,"ion-card",5),o.TgZ(1,"ion-card-content"),o.TgZ(2,"ion-list",0),o.TgZ(3,"ion-item"),o.TgZ(4,"ion-text"),o._uU(5),o._UZ(6,"br"),o._UZ(7,"br"),o._uU(8),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.qZA()),2&t){const t=e.$implicit;o.Q6J("routerLink",o.DdM(4,c))("queryParams",o.WLB(5,d,t.name,t.formatted_address)),o.xp6(5),o.Oqu(t.name),o.xp6(3),o.Oqu(t.formatted_address)}}const g=[],m=[{path:"",component:(()=>{class t{constructor(t){this.restaurantsService=t,this.order=(t,e)=>{if(t.name<e.name)return e.name},this.inputAddress="Part-Dieu"}ngOnInit(){}ionViewWillEnter(){}search(t){this.serviceLocation(t)}services(){this.serviceLocation(this.inputAddress)}serviceLocation(t){JSON.parse(window.sessionStorage.getItem("location")),this.restaurantsService.getLocation(t).subscribe(t=>{const e=JSON.parse(JSON.stringify(t)).candidates[0].geometry.location;this.resultLocation=JSON.stringify(e.lat+","+e.lng),window.sessionStorage.setItem("location",this.resultLocation),this.serviceRestaurant(e.lat,e.lng)})}serviceRestaurant(t,e){this.restaurantsService.getAllRestaurantLyon(t,e).subscribe(t=>{this.resultTest=JSON.stringify(t),this.createTest(g,this.resultTest)})}createTest(t,e){t=[];const n=JSON.parse(this.resultTest),r={name:"",rating:0,formatted_address:"",weekday_text:"",formatted_phone_number:"",website:"",user_ratings_total:0};n.results.forEach(e=>{this.affectation(t,e,r)})}affectation(t,e,n){this.restaurantsService.getPlaceName(e.place_id,"name,rating,formatted_phone_number,formatted_address,opening_hours,website,user_ratings_total").subscribe(e=>{const r=JSON.stringify(e),s=JSON.parse(r).result;(n={name:"",rating:0,formatted_address:"",weekday_text:"",formatted_phone_number:"",website:"",user_ratings_total:0}).formatted_address=s.formatted_address,n.formatted_phone_number=s.formatted_phone_number,n.name=s.name,n.rating=s.rating,n.user_ratings_total=s.user_ratings_total,n.website=s.website,null!=s.opening_hours&&(n.weekday_text=s.opening_hours.weekday_text),t.push(n),this.restaurants=t,window.sessionStorage.setItem("allRes",JSON.stringify(t))})}loadAllRestaurants(){this.restaurants=JSON.parse(window.sessionStorage.getItem("allRestaurants"))}}return t.\u0275fac=function(e){return new(e||t)(o.Y36(u.P))},t.\u0275cmp=o.Xpm({type:t,selectors:[["app-restaurants"]],decls:14,vars:2,consts:[["lines","none"],["color","primary","stacked",""],["placeholder","Part-Dieu","type","text",3,"ngModel","ngModelChange"],[3,"click"],[3,"routerLink","queryParams",4,"ngFor","ngForOf"],[3,"routerLink","queryParams"]],template:function(t,e){1&t&&(o.TgZ(0,"ion-header"),o.TgZ(1,"ion-toolbar"),o.TgZ(2,"ion-title"),o._uU(3,"Restaurants"),o.qZA(),o.qZA(),o.TgZ(4,"ion-list"),o.TgZ(5,"ion-item",0),o.TgZ(6,"ion-label",1),o._uU(7,"Place"),o.qZA(),o.TgZ(8,"ion-input",2),o.NdJ("ngModelChange",function(t){return e.inputAddress=t}),o.qZA(),o.qZA(),o.TgZ(9,"ion-item",0),o.TgZ(10,"ion-button",3),o.NdJ("click",function(){return e.search(e.inputAddress)}),o._uU(11,"Search"),o.qZA(),o.qZA(),o.qZA(),o.qZA(),o.TgZ(12,"ion-content"),o.YNc(13,l,9,8,"ion-card",4),o.qZA()),2&t&&(o.xp6(8),o.Q6J("ngModel",e.inputAddress),o.xp6(5),o.Q6J("ngForOf",e.restaurants))},directives:[a.Gu,a.sr,a.wd,a.q_,a.Ie,a.Q$,a.pK,a.j9,s.JJ,s.On,a.YG,a.W2,r.sg,a.PM,a.YI,i.rH,a.FN,a.yW],styles:[""]}),t})()},{path:"restaurant-info",loadChildren:()=>n.e(7099).then(n.bind(n,7099)).then(t=>t.RestaurantInfoPageModule)}];let p=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[i.Bz.forChild(m)],i.Bz]}),t})(),_=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.oAB({type:t}),t.\u0275inj=o.cJS({imports:[[r.ez,s.u5,a.Pc,p]]}),t})()}}]);